{
  "hash": "ab319ef5d98e99e80701e7bb2a7f5ba0",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Data visualization in Python\"\ndate: 2024-09-15\ncategories: [Python, Data Visualization, Seaborn]\n---\n\n\n# Using Seaborn to visualize progress in public health\n\nActivate the virtual environment\n\n::: {#6e76504a .cell execution_count=1}\n``` {.python .cell-code}\nimport polars as pl\nimport seaborn as sns\nimport matplotlib as plt\n\n```\n:::\n\n\n::: {#f210b76c .cell execution_count=2}\n``` {.python .cell-code}\ndf = pl.read_csv(\"https://data.cdc.gov/resource/6rkc-nb2q.csv\")\n```\n:::\n\n\n::: {#1b39ddf1 .cell execution_count=3}\n``` {.python .cell-code}\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div><style>\n.dataframe > thead > tr,\n.dataframe > tbody > tr {\n  text-align: right;\n  white-space: pre-wrap;\n}\n</style>\n<small>shape: (5, 3)</small><table border=\"1\" class=\"dataframe\"><thead><tr><th>year</th><th>leading_causes</th><th>age_adjusted_death_rate</th></tr><tr><td>i64</td><td>str</td><td>f64</td></tr></thead><tbody><tr><td>1900</td><td>&quot;Heart Disease&quot;</td><td>265.4</td></tr><tr><td>1901</td><td>&quot;Heart Disease&quot;</td><td>272.6</td></tr><tr><td>1902</td><td>&quot;Heart Disease&quot;</td><td>285.2</td></tr><tr><td>1903</td><td>&quot;Heart Disease&quot;</td><td>304.5</td></tr><tr><td>1904</td><td>&quot;Heart Disease&quot;</td><td>331.5</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nThe `year` column is an integer. Make a new column where the year is a date time.\n\n::: {#679f204a .cell execution_count=4}\n``` {.python .cell-code}\n# Create a new datetime column by combining year with a default month and day\ndf = df.with_columns(\n    (pl.col(\"year\").cast(pl.Utf8) + \"-01-01\").str.strptime(pl.Date).alias(\"date\")\n)\n\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div><style>\n.dataframe > thead > tr,\n.dataframe > tbody > tr {\n  text-align: right;\n  white-space: pre-wrap;\n}\n</style>\n<small>shape: (5, 4)</small><table border=\"1\" class=\"dataframe\"><thead><tr><th>year</th><th>leading_causes</th><th>age_adjusted_death_rate</th><th>date</th></tr><tr><td>i64</td><td>str</td><td>f64</td><td>date</td></tr></thead><tbody><tr><td>1900</td><td>&quot;Heart Disease&quot;</td><td>265.4</td><td>1900-01-01</td></tr><tr><td>1901</td><td>&quot;Heart Disease&quot;</td><td>272.6</td><td>1901-01-01</td></tr><tr><td>1902</td><td>&quot;Heart Disease&quot;</td><td>285.2</td><td>1902-01-01</td></tr><tr><td>1903</td><td>&quot;Heart Disease&quot;</td><td>304.5</td><td>1903-01-01</td></tr><tr><td>1904</td><td>&quot;Heart Disease&quot;</td><td>331.5</td><td>1904-01-01</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nNow make a single line chart for all leading causes of death.\n\n::: {#93914256 .cell execution_count=5}\n``` {.python .cell-code}\nsns.lineplot(data = df, x = 'date', y = 'age_adjusted_death_rate', hue = 'leading_causes')\n\n```\n\n::: {.cell-output .cell-output-display}\n![](seaborn_data_viz_files/figure-html/cell-6-output-1.png){width=594 height=429}\n:::\n:::\n\n\nThis is okay, but there is a lot we can do to improve this graph. Let's move the legend and change the labels for starters.\n\n::: {#a136a0a1 .cell execution_count=6}\n``` {.python .cell-code}\nexample = sns.lineplot(\n    data = df, \n    x = 'date', \n    y = 'age_adjusted_death_rate', \n    hue = 'leading_causes'\n    )\n\nsns.move_legend(\n    obj = example, \n    loc = \"center left\",\n    bbox_to_anchor = (1, 0.5), \n    ncol = 1,\n    frameon = False,\n    title = \"Cause of Death\"\n)\n\n```\n\n::: {.cell-output .cell-output-display}\n![](seaborn_data_viz_files/figure-html/cell-7-output-1.png){width=816 height=429}\n:::\n:::\n\n\n::: {#241e1ecc .cell execution_count=7}\n``` {.python .cell-code}\n# Python code goes here\nprint('hello python')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello python\n```\n:::\n:::\n\n\n::: {#332c8ee3 .cell execution_count=8}\n``` {.python .cell-code}\n# Python code goes here\nprint('hello python')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello python\n```\n:::\n:::\n\n\n::: {#8b8531fb .cell execution_count=9}\n``` {.python .cell-code}\n# Python code goes here\nprint('hello python')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello python\n```\n:::\n:::\n\n\n::: {#06c569e8 .cell execution_count=10}\n``` {.python .cell-code}\n# Python code goes here\nprint('hello python')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello python\n```\n:::\n:::\n\n\n::: {#4ee8361c .cell execution_count=11}\n``` {.python .cell-code}\n# Python code goes here\nprint('hello python')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello python\n```\n:::\n:::\n\n\n",
    "supporting": [
      "seaborn_data_viz_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}